<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>CASPA-PICO</title>
	<link rel="stylesheet" href="others/CASPA-PICO.css"/>
	<script src="others/CASPA-PICO.js" defer></script>
	<script src="https://unpkg.com/htmx.org@1.7.0"></script>
</head>

<body>
<div id="page">
	<header>
		<div id="titre_principale">

			<a class="link" href="/"><img src="/images/LOGO_CASPA-PICO.png" alt="Logo" id="logo_principale"/></a>
			<a class="link" href="/" id="CASPAPICO">CASPA-PICO</a>

		</div>

		<nav>
			<ul id="nav_principale">
				<li>
					<a class="nav_link" href="/">Accueil</a>
				</li>

				<li>
					<a class="nav_link" href="/appareils" id="page_courante">Appareils</a>
				</li>

				<li>
					<a class="nav_link" href="/donnees">Données</a>
				</li>

				<li>
					<a class="nav_link" href="/a_propos">A propos</a>
				</li>
			</ul>
		</nav>

	</header>

	<div id="sous_titre_principale">
		<a class="fonction">Ajouter des appareils à votre compte pour commencer l'envoie des données au serveur !</a>
	</div>

	<div id="corps">
		<div id="select">
                    <a class="button_nav_appareils" id="liste_appareils" href="/appareils">Liste des appareils</a>
                    <a class="button_nav_appareils" id="mes_appareils" href="/mes-appareils">Mes appareils</a>
		</div>

		<div class="ajout_appareil_corps">
			<h4>Ajout d'un appareil</h4>

			<p id="required_form">* Champs obligatoires</p>

			<form class="form_ajout_appareil" method="post" th:action="@{/ajout-appareil}" th:object="${device}">
				<span th:if="${#fields.hasErrors('displayName')}"
					  th:text="'Erreur dans le nom de l\'appareil : '+${#fields.errors('displayName')[0]}"
					  class="error_header">Erreur dans le nom de l'appareil</span>
				<div class="ligne_form">
					<label class="label_form" for="ajout_nom_appareil">Nom de l'appareil :</label>
					<input th:value="*{displayName}" th:field="*{displayName}" class="input_form"
						   type="text" name="ajout_nom_appareil" id="ajout_nom_appareil"
						   placeholder="Nom de l'appareil" required/>
				</div>

				<span th:if="${#fields.hasErrors('activationKey')}"
					  th:text="'Erreur dans le code d\'activation : '+${#fields.errors('activationKey')[0]}"
					  class="error_header">Erreur dans le nom de l'appareil</span>
				<div class="ligne_form">
					<label class="label_form" for="ajout_num_appareil">Code d'activation :</label>
					<input th:field="*{activationKey}" class="input_form" type="number"
						   name="ajout_num_appareil" min="0" max="999999" id="ajout_num_appareil"
						   placeholder="Facultatif : code à 6 chiffre. ex: 123456"/>
				</div>

				<div class="ligne_form">
					<label class="label_form" for="ajout_pays">Location :</label>
					<select class="input_form" name="ajout_pays" id="ajout_pays">
						<option th:each="inst : ${countryList}" th:value="${inst.value}"
								th:text="${inst.key}"></option>
					</select>
				</div>

				<div class="ligne_form">
					<label class="label_form" for="ajout_ville">Ville :</label>
					<select class="input_form" name="ajout_ville" id="ajout_ville">
						<option value="none" selected> Non précisé</option>
						<option value="bourg">Bour-en-Bresse (01)</option>
						<option value="laon">Laon (02)</option>
						<option value="moulins">Moulins (03)</option>
						<option value="digne">Digne (04)</option>
						<option value="gap">Gap (05)</option>
						<option value="nice">Nice (06)</option>
						<option value="privas">Privas (07)</option>
						<option value="charleville">Charleville-Mézières (08)</option>
						<option value="foix">Foix (09)</option>
						<option value="troyes">Troyes (10)</option>
						<option value="carcassonne">Carcassonne (11)</option>
						<option value="rodez">Rodez (12)</option>
						<option value="marseille">Marseille (13)</option>
						<option value="caen">Caen (14)</option>
						<option value="aurillac">Aurilac (15)</option>
						<option value="angouleme">Angoulême (16)</option>
						<option value="larochelle">La Rochelle (17)</option>
						<option value="bourges">Bourges (18)</option>
						<option value="tulle">Tulle (19)</option>
						<option value="ajaccio">Ajaccio (2A)</option>
						<option value="bastia">Bastia (2B)</option>
						<option value="dijon">Dijon (21)</option>
						<option value="saintbrieuc">Saint-Brieuc (22)</option>
						<option value="gueret">Guéret (23)</option>
						<option value="perigueux">Périgueux (24)</option>
						<option value="besancon">Besançon (25)</option>
						<option value="lille">Valence (26)</option>
						<option value="evreux">Evreux (27)</option>
						<option value="chartres">Chartres (28)</option>
						<option value="quimper">Quimper (29)</option>
						<option value="nimes">Nîmes (30)</option>
						<option value="toulouse">Toulouse (31)</option>
						<option value="auch">Auch (32)</option>
						<option value="bordeaux">Bordeaux (33)</option>
						<option value="montpellier">Montpellier (34)</option>
						<option value="rennes">Rennes (35)</option>
						<option value="chateauroux">chateauroux (36)</option>
						<option value="tours">Tours (37)</option>
						<option value="grenoble">Grenoble (38)</option>
						<option value="lons">Lons-le-Saunier (39)</option>
						<option value="montdemarsan">Mont-de-Marsan (40)</option>
						<option value="blois">Blois (41)</option>
						<option value="saintetienne">Saint-Etienne (42)</option>
						<option value="lepuyenvelay">Le Puy-en-Velay (43)</option>
						<option value="nantes">Nantes (44)</option>
						<option value="orleans">Orléans (45)</option>
						<option value="cahors">Cahors (46)</option>
						<option value="agen">Agen (47)</option>
						<option value="mende">Mende (48)</option>
						<option value="angers">Angers (49)</option>
						<option value="saintlo">Saint-Lô (50)</option>
						<option value="chalons">Châlons-en-Champagne (51)</option>
						<option value="chaumont">Chaumont (52)</option>
						<option value="laval">Laval (53)</option>
						<option value="nancy">Nancy (54)</option>
						<option value="barleduc">Bar-le-Duc (55)</option>
						<option value="vannes">Vannes (56)</option>
						<option value="metz">Metz (57)</option>
						<option value="nevers">Nevers (58)</option>
						<option value="lille">Lille (59)</option>
						<option value="beauvais">Beauvais (60)</option>
						<option value="alencon">Alençon (61)</option>
						<option value="arras">Arras (62)</option>
						<option value="clermont">Clermont-Ferrand (63)</option>
						<option value="pau">Pau (64)</option>
						<option value="tarbes">Tarbes (65)</option>
						<option value="perpignan">Perpignan (66)</option>
						<option value="strasbourg">Strasbourg (67)</option>
						<option value="colmar">Colmar (68)</option>
						<option value="lyon">Lyon (69)</option>
						<option value="vesoul">Vesoul (70)</option>
						<option value="macon">Mâcon (71)</option>
						<option value="lemans">Le Mans (72)</option>
						<option value="chambery">Chambéry (73)</option>
						<option value="annecy">Annecy (74)</option>
						<option value="paris">Paris (75)</option>
						<option value="rouen">Rouen (76)</option>
						<option value="melun">Melun (77)</option>
						<option value="versailles">Versailles (78)</option>
						<option value="niort">Niort (79)</option>
						<option value="amiens">Amiens (80)</option>
						<option value="albi">Albi (81)</option>
						<option value="montauban">Montauban (82)</option>
						<option value="toulon">Toulon (83)</option>
						<option value="avignon">Avignon (84)</option>
						<option value="larochesuryon">La-Roche-sur-Yon (85)</option>
						<option value="poitiers">Poitiers (86)</option>
						<option value="limoges">Limoges (87)</option>
						<option value="epinal">Epinal (88)</option>
						<option value="auxerre">Auxerre (89)</option>
						<option value="belfort">Belfort (90)</option>
						<option value="evry">Evry (91)</option>
						<option value="nanterre">Nanterre (92)</option>
						<option value="bobigny">Bobigny (93)</option>
						<option value="creteil">Créteil (94)</option>
						<option value="pontoise">Pontoise (95)</option>
					</select>
				</div>

				<div class="ligne_form">
					<label class="label_form" for="ajout_public">Public :</label>
					<input th:field="*{publicDevice}" type="checkbox" name="ajout_public" id="ajout_public"
						   checked/>
				</div>

				<div class="ligne_form">
					<label class="label_form" for="ajout_description">Description :</label>
					<textarea th:field="*{description}" class="input_form" name="ajout_description"
							  id="ajout_description"
							  placeholder="Facultatif : Ajout d'une courte description"></textarea>
				</div>

				<div class="centre_bouttons">
					<input class="parametre_boutton" type="button" value="Annuler" onclick="back()"/>
					<input class="parametre_boutton" type="submit" value="Ajouter"/>
				</div>
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
			</form>
		</div>
	</div>

	<footer>
		<figure id="logo_supervisor">
			<img src="/images/LOGO_SU.png" alt="LOGO_SU" id="LOGO_SU"/>
			<img src="/images/LOGO_INSU.png" alt="LOGO_INSU" id="LOGO_INSU"/>
			<img src="/images/LOGO_LATMOS.png" alt="LOGO_LATMOS" id="LOGO_LATMOS"/>
			<img src="/images/LOGO_PARTICITAE.png" alt="LOGO_PARTICITAE" id="LOGO_PARTICITAE"/>
		</figure>
	</footer>
</div>
<script th:if="${createdDevice != null}">alert("L'appareil a été ajouté avec succès !");window.location.href="/mes-appareils"</script>
</body>

</html>